generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Customer {
  customer_id     String    @id @default(uuid())
  customer_email  String
  password        String
  age             Int
  address         String
  phone_number    BigInt
  profile_picture String
  customer_name   String
  searchhistory   history[]
  request         request[]
  review          review[]
}

model Serviceprovider {
  serviceprovider_id              String    @id @default(uuid())
  serviceprovider_email           String
  password                        String
  age                             Int
  address                         String
  phone_number                    BigInt
  profile_picture                 String
  gstregistration_number          String
  chargers_for_particular_service Int
  specialisation                  String
  serviceprovider_name            String
  service_name                    String
  searchhistory                   history[]
  request                         request[]
  service                         service[]
}

model service {
  service_name       String
  service_id         String          @id @default(uuid())
  serviceprovider_id String
  history            history?
  request            request[]
  review             review[]
  service            Serviceprovider @relation(fields: [serviceprovider_id], references: [serviceprovider_id])
}

model history {
  date               DateTime
  customer_id        String
  serviceprovider_id String
  service_id         String          @unique
  customer           Customer        @relation(fields: [customer_id], references: [customer_id])
  searching          service         @relation(fields: [service_id], references: [service_id])
  search             Serviceprovider @relation(fields: [serviceprovider_id], references: [serviceprovider_id])
}

model review {
  customer_id    String
  review_id      String   @id @default(uuid())
  service_id     String
  rating         Float
  review_content String
  customer       Customer @relation(fields: [customer_id], references: [customer_id])
  service        service  @relation(fields: [service_id], references: [service_id])
  
}

model request {
  booking_id            String          @id @default(uuid())
  reasons_for_rejecting String
  date                  DateTime
  time                  DateTime
  serviceprovider_id    String
  customer_id           String
  service_id            String
  customer              Customer        @relation(fields: [customer_id], references: [customer_id])
  service               service         @relation(fields: [service_id], references: [service_id])
  serviceprovider       Serviceprovider @relation(fields: [serviceprovider_id], references: [serviceprovider_id])
}
